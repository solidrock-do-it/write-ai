# 网络错误快速修复指南

## 问题: "Failed to fetch" 错误

当您看到 "Failed to fetch" 错误时,最常见的原因是**需要配置代理服务器**。

## 快速解决方案

### 步骤 1: 启动代理软件

确保您的代理软件正在运行:

- Clash
- V2Ray
- Shadowsocks
- 或其他代理软件

### 步骤 2: 查看代理端口

常见的代理端口:

- Clash: `7890` (HTTP 代理端口)
- V2Ray: `1080` 或 `10809`
- Shadowsocks: 查看软件设置

### 步骤 3: 在应用中配置代理

1. 点击左侧边栏的 **设置** 图标
2. 找到 **代理服务器** 部分
3. 开启 **使用代理服务器** 开关
4. 填入代理地址,例如:
   ```
   http://127.0.0.1:7890
   ```
5. 点击 **保存**

### 步骤 4: 重新生成

返回主页面,再次点击 **生成** 按钮。

## 代理配置示例

### 使用 Clash

```
代理地址: http://127.0.0.1:7890
```

**验证 Clash 是否运行**:

- 打开浏览器访问: `http://127.0.0.1:9090/connections`
- 如果能看到 JSON 数据,说明 Clash 正在运行

### 使用 V2Ray

```
代理地址: http://127.0.0.1:1080
```

或者

```
代理地址: http://127.0.0.1:10809
```

## 不同 AI 提供商的网络要求

| AI 提供商           | 是否需要代理 | 说明                      |
| ------------------- | ------------ | ------------------------- |
| **Qwen (通义千问)** | ❌ 不需要    | 阿里云服务,国内可直接访问 |
| **Gemini**          | ✅ 需要      | Google 服务,国内需要代理  |
| **ChatGPT**         | ✅ 需要      | OpenAI 服务,国内需要代理  |

## 常见错误及解决方案

### 错误 1: 代理连接失败

**症状**: 启用代理后仍然失败

**解决方案**:

1. 确认代理软件正在运行
2. 检查代理端口号是否正确
3. 确认 "允许局域网连接" 已开启
4. 尝试在浏览器中测试代理是否工作

### 错误 2: API Key 无效

**症状**: 401 Unauthorized 错误

**解决方案**:

1. 重新复制 API Key (不要包含空格)
2. 确认 API Key 没有过期
3. 检查账户余额是否充足

### 错误 3: IP 被限制

**症状**: 403 Forbidden 错误

**解决方案**:

1. 必须启用代理服务器
2. 确认代理服务器可以访问国际网络
3. 尝试更换代理节点

## 测试代理连接

在启用代理之前,您可以先测试代理是否工作:

### 方法 1: 浏览器测试

在浏览器中访问以下网址测试代理:

- Google: https://www.google.com
- ChatGPT: https://chat.openai.com

如果能正常打开,说明代理工作正常。

### 方法 2: 命令行测试

Windows PowerShell:

```powershell
curl -x http://127.0.0.1:7890 https://www.google.com
```

如果返回 HTML 内容,说明代理工作正常。

## 推荐配置

### 国内用户推荐

1. **首选: Qwen (通义千问)**

   - ✅ 不需要代理
   - ✅ 免费额度高
   - ✅ 中文效果好
   - ✅ 响应速度快

2. **备选: Gemini + 代理**

   - 需要配置代理
   - 免费额度充足
   - 英文效果好

3. **备选: ChatGPT + 代理**
   - 需要配置代理
   - 需要付费账户
   - 效果最稳定

## 获取 API Key

### Qwen (通义千问)

1. 访问: https://dashscope.aliyun.com/
2. 登录阿里云账号
3. 进入控制台
4. 创建 API Key
5. 复制 API Key 到应用设置

### Gemini

1. 访问: https://makersuite.google.com/app/apikey
2. 登录 Google 账号
3. 点击 "Create API Key"
4. 复制 API Key 到应用设置

### ChatGPT

1. 访问: https://platform.openai.com/api-keys
2. 登录 OpenAI 账号
3. 点击 "Create new secret key"
4. 复制 API Key 到应用设置

## 还是不行?

查看详细的故障排查指南:

- [TROUBLESHOOTING.md](./TROUBLESHOOTING.md)

或者查看控制台输出:

1. 按 F12 打开开发者工具
2. 切换到 Console 标签
3. 查看详细的错误信息
4. 截图并寻求帮助

## 技术支持

如果以上方案都无法解决问题,请提供以下信息:

1. 使用的 AI 提供商
2. 是否启用代理及代理地址
3. 完整的错误信息 (来自浏览器控制台)
4. 操作系统和浏览器版本
